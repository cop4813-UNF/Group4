<?php
       require_once('Database.php');
       
       Class Product extends Database {
       


      public function __construct(){                    		  
		    	
		   parent::__construct();
	   	   if (session_status() !== PHP_SESSION_ACTIVE) {
     		      @session_start();
   		   }	
   
   		   $this->create_product_table();	  
   		    
   		  
        }

        private function create_product_table(){        	    
        	   	// sql to create table
		    	  $sql = "CREATE TABLE IF NOT EXISTS Products (
		    	    id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
		    	    item_name varchar(140) NOT NULL,
		    	    item_description varchar(256) NOT NULL,
		    	    price decimal(9,2) NOT NULL,
			       quantity int(16) NOT NULL,
                image_link varchar(256) DEFAULT NULL
		        )";  
		        $this->query_exec($sql);		             	
        }
        
        public function get_all_products(){
              $conn = new mysqli("localhost", $this->username, $this->password, $this->dbname);	             
              $sql= 'SELECT item_name, item_description, price, quantity, image_link FROM Products';
	           $result = $conn->query($sql);
	           if ($result->num_rows > 0) {
                  $rows = $result->fetch_array(MYSQLI_ASSOC);
	               return $rows;
              }
              print 'No products present in  the table';
              return NULL;
        }        
        

  }


?>
